<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Omda — Press what you want</title>
<style>
  :root{
    --bg:#0b1220; --bg2:#0e1526; --card:#111a2b; --muted:#9eb3c7; --text:#eaf2f9;
    --brand:#0ea5e9; --ok:#22c55e; --border:#1a2947;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);
       background:linear-gradient(180deg,var(--bg),var(--bg2));}
  header{padding:28px 16px;text-align:center;border-bottom:1px solid var(--border);
         background:radial-gradient(1000px 300px at 50% -50%, #12457a88, transparent),#0b1220;}
  .wrap{max-width:1100px;margin:0 auto}
  .bird{width:88px;height:88px;margin:0 auto 10px;display:block;
        filter:drop-shadow(0 8px 24px rgba(14,165,233,.25))}
  h1{margin:6px 0 0;font-size:34px;letter-spacing:.5px}
  .tag{margin:4px 0 0;color:#b7d6ef;font-size:16px}
  main{max-width:1100px;margin:0 auto;padding:22px 16px}
  .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;text-align:center;
        box-shadow:0 10px 30px rgba(0,0,0,.35);transition:transform .15s,border-color .15s}
  .card:hover{transform:translateY(-4px);border-color:#28518a}
  .card h3{margin:10px 0 6px}
  .icon{width:46px;height:46px;margin:2px auto 8px;display:block}
  .muted{color:var(--muted)}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;margin-top:6px;
        border:1px solid #23406a;color:#bcd1e4;background:#0e1a30}
  .ok{border-color:#144b2b;color:#b7f3c9;background:#0f291c}
  .disabled{opacity:.7;cursor:not-allowed}
  .panel{margin-top:22px;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
  .row{display:grid;gap:12px;grid-template-columns:1fr}
  @media(min-width:860px){.row{grid-template-columns:1fr 1fr}}
  label{display:block;margin-bottom:6px;color:#cfe0ef}
  input[type=file]{width:100%;padding:14px;border:1px dashed #2a3f69;border-radius:12px;background:#0f1a30;color:#bcd1e4}
  .controls{display:grid;gap:12px;margin-top:8px}
  .control{background:#0e182c;border:1px solid #1a2b4f;border-radius:12px;padding:12px}
  .val{color:#9bd3ff;margin-left:6px}
  .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  button{border:0;cursor:pointer;border-radius:12px;padding:12px 14px;font-size:15px}
  .primary{background:var(--brand);color:#001222}
  .ghost{background:#132341;color:#cfe0ef;border:1px solid #1b2d54}
  .okBtn{background:var(--ok);color:#00220f}
  .list{display:grid;grid-template-columns:1fr;gap:12px;margin-top:14px}
  @media(min-width:720px){.list{grid-template-columns:1fr 1fr}}
  .item{background:#0f1a2e;border:1px solid #1b2e53;border-radius:14px;padding:12px;display:flex;gap:12px}
  .thumb{width:88px;height:88px;background:#0c1526;border-radius:10px;display:flex;align-items:center;justify-content:center;
         overflow:hidden;border:1px solid #1a2c50}
  .thumb img{max-width:100%;max-height:100%}
  .meta{flex:1}
  .meta h4{margin:2px 0 6px;font-size:15px}
  .progress{height:6px;background:#0b1324;border:1px solid #162747;border-radius:10px;overflow:hidden;margin-top:8px}
  .bar{height:100%;background:linear-gradient(90deg,#22c55e,#0ea5e9);width:0%}
  footer{opacity:.8;text-align:center;padding:20px 10px;color:#a8bed3;border-top:1px solid var(--border)}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <!-- Abstract bird logo (temporary) -->
    <svg class="bird" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" aria-label="Omda logo">
      <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#38bdf8"/><stop offset="1" stop-color="#0ea5e9"/></linearGradient></defs>
      <path d="M16 72c18-2 26-6 40-20 6-6 10-12 22-14 16-3 38 8 38 8s-12 2-18 6c8 2 16 10 16 10s-10 2-18 0c0 10-6 22-24 28-18 6-38 0-56-18z" fill="url(#g)"/>
      <circle cx="78" cy="57" r="3" fill="#0b1220"/>
    </svg>
    <h1>Omda</h1>
    <p class="tag">Press what you want</p>
  </div>
</header>

<main>
  <!-- Services -->
  <section class="grid" aria-label="Services">
    <article class="card" id="card-images" role="button" tabindex="0" aria-label="Image compression">
      <!-- Image icon -->
      <svg class="icon" viewBox="0 0 48 48" aria-hidden="true">
        <rect x="6" y="10" width="36" height="28" rx="4" fill="#153257" stroke="#2a5ea3"/>
        <circle cx="18" cy="20" r="4" fill="#8bd2ff"/>
        <path d="M10 34l9-9 8 6 7-7 8 10H10z" fill="#1fa380"/>
      </svg>
      <h3>Images</h3>
      <p class="muted">Compress photos locally. No servers.</p>
      <span class="pill ok">Available now</span>
    </article>

    <article class="card disabled" aria-disabled="true" title="Coming soon">
      <!-- PDF icon (no text inside SVG) -->
      <svg class="icon" viewBox="0 0 48 48" aria-hidden="true">
        <rect x="10" y="6" width="28" height="36" rx="4" fill="#7a1d1d"/>
        <path d="M30 6v10h10" fill="#a22e2e"/>
        <rect x="15" y="22" width="18" height="2.6" rx="1.3" fill="#ffdede"/>
        <rect x="15" y="27" width="14" height="2.6" rx="1.3" fill="#ffdede"/>
        <rect x="15" y="32" width="10" height="2.6" rx="1.3" fill="#ffdede"/>
      </svg>
      <h3>PDF</h3>
      <p class="muted">Will be enabled online.</p>
      <span class="pill">Coming soon</span>
    </article>

    <article class="card disabled" aria-disabled="true" title="Coming soon">
      <!-- Word icon -->
      <svg class="icon" viewBox="0 0 48 48" aria-hidden="true">
        <rect x="10" y="6" width="28" height="36" rx="4" fill="#113a8a"/>
        <path d="M30 6v10h10" fill="#1e56c0"/>
        <rect x="15" y="24" width="18" height="2.6" rx="1.3" fill="#d6e6ff"/>
        <rect x="15" y="29" width="14" height="2.6" rx="1.3" fill="#d6e6ff"/>
        <rect x="15" y="34" width="8"  height="2.6" rx="1.3" fill="#d6e6ff"/>
      </svg>
      <h3>Word</h3>
      <p class="muted">Will be enabled online.</p>
      <span class="pill">Coming soon</span>
    </article>

    <article class="card disabled" aria-disabled="true" title="Coming soon">
      <!-- Video icon -->
      <svg class="icon" viewBox="0 0 48 48" aria-hidden="true">
        <rect x="6" y="12" width="36" height="24" rx="4" fill="#182b3f" stroke="#2b4d73"/>
        <polygon points="22,18 34,24 22,30" fill="#79c8ff"/>
      </svg>
      <h3>Video</h3>
      <p class="muted">Will be enabled online.</p>
      <span class="pill">Coming soon</span>
    </article>
  </section>

  <!-- Image compressor (offline) -->
  <section id="panel-images" class="panel" aria-label="Image compressor" hidden>
    <div class="row">
      <section>
        <label>Select images (PNG / JPG / JPEG):</label>
        <input id="picker" type="file" accept="image/png,image/jpeg" multiple>
        <div class="controls">
          <div class="control">
            <label>Max dimension (W/H): <span class="val" id="maxDimVal">1280px</span></label>
            <input id="maxDim" type="range" min="640" max="4096" step="64" value="1280">
          </div>
          <div class="control">
            <label>JPEG quality: <span class="val" id="qualityVal">0.80</span></label>
            <input id="quality" type="range" min="0.3" max="1" step="0.05" value="0.8">
          </div>
          <div class="btns">
            <button class="primary" id="compressAll">Compress all</button>
            <button class="ghost" id="clearAll">Clear</button>
          </div>
        </div>
        <p class="muted" style="margin-top:8px">All processing happens on your device.</p>
      </section>

      <section>
        <div id="list" class="list" aria-live="polite"></div>
      </section>
    </div>
  </section>
</main>

<footer>© 2025 Omda. All rights reserved.</footer>

<script>
  // Open panel when clicking the Images card
  const cardImages = document.getElementById('card-images');
  const panelImages = document.getElementById('panel-images');
  cardImages.addEventListener('click', () => panelImages.hidden = false);
  cardImages.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') panelImages.hidden = false;
  });

  // Elements
  const picker = document.getElementById('picker');
  const listEl = document.getElementById('list');
  const maxDim = document.getElementById('maxDim');
  const maxDimVal = document.getElementById('maxDimVal');
  const quality = document.getElementById('quality');
  const qualityVal = document.getElementById('qualityVal');
  const compressAllBtn = document.getElementById('compressAll');
  const clearAllBtn = document.getElementById('clearAll');

  let items = []; // {file, name, origBytes, barEl, resultEl, dlA}

  maxDim.addEventListener('input', () => maxDimVal.textContent = maxDim.value + 'px');
  quality.addEventListener('input', () => qualityVal.textContent = Number(quality.value).toFixed(2));
  picker.addEventListener('change', (e) => {
    const files = Array.from(e.target.files || []);
    renderList(files);
  });

  function renderList(files){
    listEl.innerHTML = '';
    items = [];
    for (const f of files) {
      const id = 'itm_' + Math.random().toString(36).slice(2);
      const el = document.createElement('div');
      el.className = 'item';
      el.innerHTML = `
        <div class="thumb"><span class="muted">…</span></div>
        <div class="meta">
          <h4>${f.name}</h4>
          <div class="muted">Original: ${(f.size/1024).toFixed(1)} KB</div>
          <div class="progress"><div class="bar"></div></div>
          <div class="muted" id="${id}_result"></div>
          <div class="btns" style="margin-top:8px;">
            <button class="primary" id="${id}_do">Compress & Save</button>
            <a class="ghost" id="${id}_dl" style="display:none;" download>Download</a>
          </div>
        </div>`;
      listEl.appendChild(el);

      // preview
      const reader = new FileReader();
      reader.onload = () => {
        const img = new Image();
        img.onload = () => { const t = el.querySelector('.thumb'); t.innerHTML=''; t.appendChild(img); };
        img.src = reader.result;
      };
      reader.readAsDataURL(f);

      const item = {
        file: f,
        name: f.name,
        origBytes: f.size,
        barEl: el.querySelector('.bar'),
        resultEl: el.querySelector('#'+id+'_result'),
        dlA: el.querySelector('#'+id+'_dl'),
        doBtn: el.querySelector('#'+id+'_do')
      };
      item.doBtn.addEventListener('click', () => compressOne(item));
      items.push(item);
    }
  }

  function renameToJpg(name){
    const dot = name.lastIndexOf('.');
    return (dot === -1 ? name : name.slice(0, dot)) + '.jpg';
  }
  function clampSize(sw, sh, maxSide){
    const r = sw / sh; let w = sw, h = sh;
    if (Math.max(sw, sh) > maxSide){
      if (r > 1){ w = maxSide; h = Math.round(maxSide / r); }
      else { h = maxSide; w = Math.round(maxSide * r); }
    }
    return {w, h};
  }

  async function compressOne(item){
    const f = item.file;
    const buf = await f.arrayBuffer();
    const blobURL = URL.createObjectURL(new Blob([buf]));
    const img = new Image(); img.decoding='async'; img.src = blobURL; await img.decode();

    const {w, h} = clampSize(img.naturalWidth, img.naturalHeight, parseInt(maxDim.value,10));
    const canvas = document.createElement('canvas'); canvas.width = w; canvas.height = h;
    const ctx = canvas.getContext('2d'); ctx.drawImage(img, 0, 0, w, h);

    // simple progress animation while toBlob works
    let p = 0; const tick = setInterval(()=>{ p=Math.min(95,p+7); item.barEl.style.width=p+'%'; },120);
    const q = Number(quality.value);
    const outBlob = await new Promise(res => canvas.toBlob(res,'image/jpeg', q));
    clearInterval(tick); item.barEl.style.width='100%';

    const ratio = outBlob.size / f.size;
    const saved = (100 - ratio*100).toFixed(0);
    item.resultEl.textContent = `Result: ${w}×${h}px — ${(outBlob.size/1024).toFixed(1)} KB (Saved ${saved}%)`;

    const url = URL.createObjectURL(outBlob);
    item.dlA.href = url; item.dlA.download = renameToJpg(f.name);
    item.dlA.style.display = 'inline-block';
  }

  compressAllBtn.addEventListener('click', async ()=>{
    for (const it of items){ await compressOne(it); }
  });
  clearAllBtn.addEventListener('click', ()=>{
    document.getElementById('picker').value = '';
    listEl.innerHTML = ''; items = [];
  });
</script>
</body>
</html>